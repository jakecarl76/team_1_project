
<%- include('../includes/head.ejs'); %>
</head>
<body>
<%- include('../includes/nav.ejs'); %>
<main>
    <% if(errorMessage){ %>
        <div class="user-message"><%= errorMessage %></div>
    <% } %>
    <label for="item-type">What would you like to add?</label>
    <select name="item-type" id="item-type">
        <option value="book" selected disabled>Select</option>
        <option value="book">Book</option>
        <option value="movie">Movie</option>
        <option value="game">Game</option>
    </select>

    <form class="book-form" action=<% if(editing){ %> '/edit-book' <% }else{ %>"/add-book"<% } %> method="POST" enctype="multipart/form-data">
        <fieldset>
            <legend><% if(editing){ %> Edit Book <% }else{ %>Add A Book<% } %></legend>
            <div class="form-control">
                <label for="title">Title</label>
                <input type="text" name="title" id="title" placeholder="My Book Title" value="<% if(editing || hasError){ %><%= item.title %><% } %>" 
                class="<%= validationErrors.find(e => e.param === 'title') ? 'invalid' : ''  %>" >
            </div>
            <div class="form-control">
                <label for="author">Price</label>
                <input type="text" name="author" id="author" placeholder="Name of Author" value="<% if(editing || hasError){ %><%= item.author %><% } %>" class="<%= validationErrors.find(e => e.param === 'author') ? 'invalid' : ''  %>">
            </div>
            <div class="form-control">
                <label for="image">Image</label>
                <input type="file" name="image" id="image">
            </div>
            <div class="form-control">
                <label for="description">Description</label>
                <textarea name="description" id="description" rows="5" placeholder="Describe the Book" class="<%= validationErrors.find(e => e.param === 'description') ? 'invalid' : ''  %>"><% if(editing || hasError){ %><%= item.description %><% } %></textarea>
            </div>
            <% if(editing) { %>
                <input type="hidden" value="<%= item._id %>" name="itemId">
            <% } %>
            <div class="add-buttons">
                <input type="hidden" value="<%= csrfToken %>" name="_csrf">
                <button class="btn" type="submit">
                    <% if(editing) { %> Update <% } else { %> Add Book <% } %>
                </button>
                <% if(!editing) { %>
                <input class="btn" type="submit" formaction='/add-another' value="Add Another">
                <% } %>
            </div> 
        </fieldset>
    </form>
</main>
<%- include('../includes/end.ejs'); %>
 
    